<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Favorit - Resep</title>
<style>
  :root{--bg:#F6FBF7;--accent:#7FCF9B;--muted:#6b7f77}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg)}
  header{background:linear-gradient(90deg,var(--accent),#B8E6C8);padding:14px;color:#053;display:flex;align-items:center;gap:12px}
  header a{color:#053;text-decoration:none;font-weight:700}
  .wrap{max-width:960px;margin:18px auto;padding:14px}
  .list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
  .card{background:#fff;padding:0;border-radius:12px;overflow:hidden;box-shadow:0 10px 30px rgba(6,36,24,0.06);cursor:pointer}
  .card img{width:100%;height:140px;object-fit:cover}
  .body{padding:12px}
  .empty{padding:30px;text-align:center;color:var(--muted)}
  .btn{padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#053;font-weight:700;cursor:pointer}
</style>
</head>
<body>
  <header>
    <a href="index.html">⬅️ Kembali</a>
    <div style="font-weight:800">Favorit Saya</div>
  </header>

  <main class="wrap">
    <div id="list" class="list"></div>
    <div id="empty" class="empty" style="display:none">Belum ada resep favorit. Simpan resep di halaman detail untuk menambah.</div>
  </main>

<script>
const DATA_URL = "https://gampil.github.io/resep/resepterbaru/recipes.json";
let tb_recipe = [];

async function load(){
  try{
    const res = await fetch(DATA_URL);
    const data = await res.json();
    tb_recipe = data.tb_recipe || [];
    renderFavs();
  }catch(e){ console.error(e); document.getElementById('list').innerHTML='<p>Gagal memuat</p>';}
}

function renderFavs(){
  const favs = JSON.parse(localStorage.getItem('fav_recipes')||'[]');
  const list = document.getElementById('list');
  list.innerHTML = '';
  if(!favs || favs.length===0){ document.getElementById('empty').style.display='block'; return; }
  document.getElementById('empty').style.display='none';
  const items = tb_recipe.filter(r=> favs.includes(r.recipe_id));
  items.forEach(r=>{
    const card = document.createElement('article'); card.className='card';
    card.innerHTML = `<img src="${r.recipe_image||''}" alt="${r.recipe_name}" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x240?text=No+Image'">
      <div class="body"><h4 style="margin:0">${r.recipe_name}</h4><div style="margin-top:8px"><a class="btn" href="detail.html?id=${encodeURIComponent(r.recipe_id)}">Lihat</a></div></div>`;
    list.appendChild(card);
  });
}

load();
</script>
</body>
</html>
